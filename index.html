<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      .form-control,.form-select{
        box-shadow: 10px 5px 6px rgba(0, 0, 0, 0.615);
      }
     
    </style>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="apple-touch-icon" sizes="180x180" href="v/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="v/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="v/favicon-16x16.png">
<link rel="manifest" href="v/site.webmanifest">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/8.8.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.0/firebase-storage.js"></script>
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>MVJ NOTICE UPLOAD PORTAL</title>
  </head>

  <body>
    <a href="https://vinayks1108.github.io/Display_notice.github.io/">DISPLAY NOTICES </a>
    <form id="myForm" action="#">
    <center><i><b><h1><u>MVJ NOTICE BOARD</u></h1></b></i></center>
    <div class="container mb-5">  
      <h3 class="mt-5">Upload the File</h3>
      <div class="row g-3 mt-2 border">
        <div class="col-md-3">
          <label for="id" class="form-label">MAIN CONTENT</label>
          <input
            class="form-control"
            type="text"
            required
            placeholder="Content"
            id="content"
          />
        </div>
        <div class="col-md-3">
          <label for="id" class="form-label">HEADER CONTENT</label>
          <input
            class="form-control"
            type="text"
            required
            placeholder=""
            id="head-sec" value=
             "MVJ COLLEGE OF ENGINEERING [EEE Department]"
            readonly
          />
        
         
        </div>
        <div class="col-md-3">
         <label for="id" class="form-label">FROM :</label>
         <select  id="notice-ref" class="form-control">
          <option value="">---Select the name of faculty---</option>
          <option value="DR.Soumya Mishra [H.O.D]">Dr.Soumya Mishra [H.O.D]</option>
          <option value="DR.Galiveeti Hema Kumar Reddy">Dr.Galiveeti Hema Kumar Reddy</option>
          <option value="Mr.P Sunil Kumar ">Mr.P Sunil Kumar </option>
          <option value="Mrs.Renjini E Nambiar">Mrs.Renjini E Nambiar</option>
          <option value="Mrs.Krupa M">Mrs.Krupa M</option>
          <option value="Mrs.Gayathri R">Mrs.Gayathri R</option>
          <option value="Ms.Renukamba J.N">Ms.Renukamba J.N</option>
          <option value="Mrs.Nikitha B.N">Mrs.Nikitha B.N</option>
          <option value="Mrs.Bini Babu">Mrs.Bini Babu</option>
          <option value="Mr.Raja Rajan">Mr.Raja Rajan</option>
          <option value="Mrs.Vaishali N.B">Mrs.Vaishali N.B</option>
          <option value="Mr.P Harish Kumar">Mr.P Harish Kumar</option>
          <option value="Mrs.Deeksha R">Mrs.Deeksha R</option>
          <option value="Mrs.Harshitha H.M">Mrs.Harshitha H.M</option>
         </select>
         
         </select>
        </div>
        <div class="col-md-3">
          <label for="id" class="form-label">Date</label>
          <input
            class="form-control"
            type="date"
            required
            placeholder="Time"
            id="time"
          />
        </div>
        <div class="col-md-3">
          <label for="id" class="form-label">VALIDITY</label>
          <table>
            <tr>
              <td>Upto:
              </td>

         <td><input
            class="form-control"
            type="time"
            required
            placeholder="time"
            id="validity"
          />
        </td>
          </tr>
        </table>
        </div>
        <div class="col-md-3">
          <label for="file" class="form-label">IMAGE FILE</label>
          <div class="input-group mb-3">
            <input type="file" class="form-control" required id="file" />
          </div>
        </div>

        <div class="col-md-3">
          <label for="file" class="form-label">Notice Number</label>
          <div class="input-group mb-3">
            <!-- <input type="" class="form-control" required id="file" /> -->
            <select name="not" id="fil" class="form-select" >
              <option value="">---Select the notice---</option>
              <option value="notice-1">NOTICE-1</option>
              <option value="notice-2">NOTICE-2</option>
              <option value="notice-3">NOTICE-3</option>   
              <option value="notice-4">NOTICE-4</option>
              <option value="notice-5">NOTICE-5</option>
              <option value="notice-6">NOTICE-6</option>   
              <option value="notice-7">NOTICE-7</option>
              <option value="notice-8">NOTICE-8</option>
                        
            </select>
          </div>
        </div>


      </div>
      <br />
      
      <button type="submit" onclick="update()" class="btn btn-primary" id="submit">
        <div id="loading" style="display: none">
          <span
            class="spinner-border spinner-border-sm"
            role="status"
            aria-hidden="true"
          ></span>
          Loading...
        </div>
        <span id="uploadSpan">Upload</span>
      </button>
    <script >
   const firebaseConfig = {
  apiKey: "AIzaSyDYK-pacTGL3Q2ugGW12XhplpCBkrSob-A",
  authDomain: "webdemo-572d9.firebaseapp.com",
  databaseURL: "https://webdemo-572d9-default-rtdb.firebaseio.com",
  projectId: "webdemo-572d9",
  storageBucket: "webdemo-572d9.appspot.com",
  messagingSenderId: "692981044266",
  appId: "1:692981044266:web:ebdb142027ab2a4de35f53"
};


var value;

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
var database=" ";
  function update(){
    var select = document.getElementById('fil');
value  = select.options[select.selectedIndex].value;
console.log(value);
   database = firebase.database().ref("Data/"+value+"/");
   console.log(database);
  
}
  
  


  const file = document.getElementById("file");
  const content = document.getElementById("content");
  const headsec = document.getElementById("head-sec");
  const noticeref = document.getElementById("notice-ref");
  const time = document.getElementById("time");
  const validity = document.getElementById("validity");
  const btn = document.getElementById("submit");
  const loading = document.getElementById("loading");

  btn.addEventListener("click", () => {
    const storage = firebase.storage().ref(value+".jpg");
    const idName = "hh";
    const floc = file.files[0];
    file.value = "";
    const metadata = {
      contentType: file.jpg,
    };
    var task = storage.put(floc, metadata);
    task.on(
      "state_changed",
      (snapshot) => {
        loading.style.display = "block";
        uploadSpan.style.display = "none";
        console.log("Uploading...");
      },
      (err) => {
        console.log(err);
      },
      () => {
        loading.style.display = "none";
        uploadSpan.style.display = "block";
        task.snapshot.ref.getDownloadURL().then((url) => {
          database.set({
            content: content.value,
            head_sec: headsec.value,
            notice_ref: noticeref.value,
            time: time.value,
            validity: validity.value,
            url : url
          });
        });
        console.log("Complete");
        // alert("Uploaded");
      }
    );
  });
  
    </script>
    <script>
      function fun(){
        document.getElementById("myForm").reset()
      }
    </script>
    </form>
  </body>
</html>
